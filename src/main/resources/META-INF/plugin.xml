<idea-plugin>
    <id>ru.dsudomoin.kora-plugin</id>
    <name>Kora</name>
    <vendor>dsudomoin</vendor>

    <description><![CDATA[
        Provides Spring-like "Go to Declaration" navigation for the Kora DI framework.
        Navigate from dependency injection points (constructor parameters, factory method parameters)
        to their providers (@Component classes, factory methods in @KoraApp/@Module interfaces).
    ]]></description>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.java</depends>
    <depends>org.jetbrains.kotlin</depends>
    <depends>org.jetbrains.plugins.yaml</depends>
    <depends optional="true" config-file="hocon-support.xml">org.jetbrains.plugins.hocon</depends>

    <extensions defaultExtensionNs="com.intellij">
        <fileBasedIndex implementation="ru.dsudomoin.koraplugin.index.KoraProviderIndex"/>
        <fileBasedIndex implementation="ru.dsudomoin.koraplugin.index.KoraInjectionSiteIndex"/>

        <gotoDeclarationHandler
                implementation="ru.dsudomoin.koraplugin.config.yaml.YamlConfigGotoHandler"/>
        <gotoDeclarationHandler
                implementation="ru.dsudomoin.koraplugin.config.AnnotationValueGotoHandler"/>
        <codeInsight.lineMarkerProvider language="JAVA"
                implementationClass="ru.dsudomoin.koraplugin.navigation.KoraLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="kotlin"
                implementationClass="ru.dsudomoin.koraplugin.navigation.KoraLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="JAVA"
                implementationClass="ru.dsudomoin.koraplugin.config.ConfigSourceLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="kotlin"
                implementationClass="ru.dsudomoin.koraplugin.config.ConfigSourceLineMarkerProvider"/>

        <localInspection
                language="UAST"
                groupName="Kora Framework"
                shortName="KoraMissingProvider"
                displayName="Missing Kora DI provider"
                enabledByDefault="true"
                level="WEAK WARNING"
                implementationClass="ru.dsudomoin.koraplugin.inspection.KoraMissingProviderInspection"/>

        <completion.contributor language="yaml"
                implementationClass="ru.dsudomoin.koraplugin.config.yaml.KoraYamlCompletionContributor"/>

        <localInspection
                language="yaml"
                groupName="Kora Framework"
                shortName="KoraUnknownConfigKey"
                displayName="Unknown Kora config key"
                enabledByDefault="false"
                level="WEAK WARNING"
                implementationClass="ru.dsudomoin.koraplugin.inspection.KoraUnknownConfigKeyInspection"/>
    </extensions>

    <extensions defaultExtensionNs="org.jetbrains.kotlin">
        <supportsKotlinPluginMode supportsK2="true"/>
    </extensions>
</idea-plugin>
